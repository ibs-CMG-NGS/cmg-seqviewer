# ğŸ”„ Update Summary - RNA-Seq Analyzer ê°œì„ ì‚¬í•­

## ğŸ“… ë‚ ì§œ: 2025-12-09

---

## âœ… ìµœê·¼ ì—…ë°ì´íŠ¸ (2025-12-09 ì˜¤í›„ - Part 3)

### 1ï¸âƒ£ ë³„ëª… ì…ë ¥ ê¸°ëŠ¥ ìˆ˜ì •
**íŒŒì¼:** `src/gui/main_window.py`

**ë¬¸ì œ:** Add Dataset ë²„íŠ¼ì—ë§Œ ë³„ëª… ì…ë ¥ì´ ì ìš©ë˜ì–´ ìˆì—ˆìŒ

**í•´ê²°:**
- File â†’ Open Datasetì—ë„ ë³„ëª… ì…ë ¥ ë‹¤ì´ì–¼ë¡œê·¸ ì¶”ê°€
- ëª¨ë“  ë°ì´í„°ì…‹ ë¡œë“œ ì‹œ ì¼ê´€ë˜ê²Œ ë³„ëª… ì…ë ¥ ìš”ì²­

**ë™ì‘:**
```
File â†’ Open ë˜ëŠ” Add Dataset í´ë¦­
â†’ íŒŒì¼ ì„ íƒ
â†’ âœ¨ ë³„ëª… ì…ë ¥ ë‹¤ì´ì–¼ë¡œê·¸
â†’ ë³„ëª…ìœ¼ë¡œ ë°ì´í„°ì…‹ ì¶”ê°€
```

---

### 2ï¸âƒ£ Dataset ì „í™˜ ê¸°ëŠ¥ ìˆ˜ì •
**íŒŒì¼:** `src/presenters/main_presenter.py`

**ë¬¸ì œ:** Current Dataset ë“œë¡­ë‹¤ìš´ì—ì„œ ì„ íƒí•´ë„ í™”ë©´ì´ ì—…ë°ì´íŠ¸ë˜ì§€ ì•ŠìŒ

**í•´ê²°:**
- `_update_view_with_dataset()` ìˆ˜ì •
- "Whole Dataset" íƒ­ì„ ì°¾ì•„ì„œ ì—…ë°ì´íŠ¸
- íƒ­ì´ ì—†ìœ¼ë©´ ì²« ë²ˆì§¸ íƒ­ ì—…ë°ì´íŠ¸

**ìˆ˜ì • ì „:**
```python
# í•­ìƒ ì²« ë²ˆì§¸ íƒ­(index 0)ë§Œ ì—…ë°ì´íŠ¸
table = self.view.data_tabs.widget(0)
```

**ìˆ˜ì • í›„:**
```python
# "Whole Dataset" íƒ­ì„ ì°¾ì•„ì„œ ì—…ë°ì´íŠ¸
for i in range(self.view.data_tabs.count()):
    if self.view.data_tabs.tabText(i) == "Whole Dataset":
        table = self.view.data_tabs.widget(i)
        self.view.populate_table(table, dataset.dataframe, dataset)
        break
```

---

### 3ï¸âƒ£ Column Display Level ê¸°ë³¸ê°’ ë³€ê²½
**íŒŒì¼:** `src/gui/main_window.py`

**ë³€ê²½ì‚¬í•­:**
- ê¸°ë³¸ê°’: `"de"` â†’ `"basic"` âœ…
- View ë©”ë‰´ì˜ ì²´í¬ í‘œì‹œë„ Basicìœ¼ë¡œ ë³€ê²½

**ì½”ë“œ:**
```python
# ì„¤ì • ê°’
self.column_display_level = "basic"  # ê¸°ë³¸ê°’: basic

# ë©”ë‰´ ì²´í¬
basic_action.setChecked(True)  # âœ… Basicì´ ê¸°ë³¸ìœ¼ë¡œ ì²´í¬ë¨
```

---

### 4ï¸âƒ£ Comparison Panel Options ì¤‘ë³µ ì œê±°
**íŒŒì¼:** `src/gui/comparison_panel.py`

**ë¬¸ì œ:** 
- "Use current gene list filter" â†’ Comparison Typeì—ì„œ "Gene List Filtering" ì„ íƒê³¼ ì¤‘ë³µ
- "Use current statistics filter" â†’ Comparison Typeì—ì„œ "Statistics Filtering" ì„ íƒê³¼ ì¤‘ë³µ

**í•´ê²°:**
ì¤‘ë³µ ì˜µì…˜ ì œê±°í•˜ê³  ìœ ìš©í•œ ì˜µì…˜ë§Œ ìœ ì§€

**ìˆ˜ì • ì „:**
```
Options:
â˜‘ Use current gene list filter
â˜‘ Use current statistics filter
â˜ Show common genes only
```

**ìˆ˜ì • í›„:**
```
Options:
â˜ Show common genes only (intersection)
   â†’ ëª¨ë“  ë°ì´í„°ì…‹ì— ê³µí†µìœ¼ë¡œ ì¡´ì¬í•˜ëŠ” ìœ ì „ìë§Œ í‘œì‹œ
â˜‘ Include unique genes (union)
   â†’ ì–´ëŠ ë°ì´í„°ì…‹ì—ë‚˜ ì¡´ì¬í•˜ëŠ” ìœ ì „ì í¬í•¨
```

---

### 5ï¸âƒ£ Basic ëª¨ë“œì—ì„œ í†µê³„ ì»¬ëŸ¼ ì œì™¸
**íŒŒì¼:** `src/gui/main_window.py`

**ë¬¸ì œ:** Basic ëª¨ë“œì—ì„œ `lfcSE`, `stat` ì»¬ëŸ¼ì´ í‘œì‹œë¨

**í•´ê²°:**
í†µê³„ ê´€ë ¨ ì»¬ëŸ¼ì„ ëª…ì‹œì ìœ¼ë¡œ ì œì™¸

**ì œì™¸ ëª©ë¡:**
- `lfcSE` (log2 Fold Change Standard Error)
- `stat` (í†µê³„ëŸ‰)
- ëŒ€ì†Œë¬¸ì êµ¬ë¶„ ì—†ì´ í•„í„°ë§

**ê²°ê³¼:**
```
Basic ëª¨ë“œ í‘œì‹œ ì»¬ëŸ¼:
symbol, gene_id, Ctrl_1, Ctrl_2, Ctrl_3, KO_1, KO_2, KO_3, ...
(lfcSE, stat ì œì™¸ë¨ âœ…)
```

**ì½”ë“œ:**
```python
if self.column_display_level == "basic":
    # ì œì™¸í•  ì»¬ëŸ¼ ëª©ë¡
    exclude_columns = ['lfcSE', 'stat', 'lfcse', 'statistic']
    
    for col in all_columns:
        if (col not in mapped_originals and 
            col not in exclude_columns and
            col.lower() not in exclude_columns):
            columns_to_show.append(col)
```

---

## âœ… ì´ì „ ì—…ë°ì´íŠ¸ (2025-12-09 ì˜¤í›„ - Part 2)

### ğŸ—‘ï¸ Statistical Analysis ì„¹ì…˜ ì œê±°
**íŒŒì¼:** `src/gui/filter_panel.py`

**ë³€ê²½ì‚¬í•­:**
- ì¢Œì¸¡ íŒ¨ë„ì˜ "Statistical Analysis" ê·¸ë£¹ ì œê±°
- Fisher's Exact Test, GSEA Lite ë²„íŠ¼ ì œê±°
- ì´ìœ : Menu Bar â†’ Analysis ë©”ë‰´ì— ë™ì¼ ê¸°ëŠ¥ ì¡´ì¬ (ì¤‘ë³µ ì œê±°)

**ì´ì „:**
```
Filter Panel
â”œâ”€ Filtering Mode
â”œâ”€ Gene List Input
â”œâ”€ Statistical Filters
â””â”€ Statistical Analysis â† ì œê±°ë¨
   â”œâ”€ Fisher's Exact Test
   â””â”€ GSEA Lite
```

**í˜„ì¬:**
```
Filter Panel
â”œâ”€ Filtering Mode
â”œâ”€ Gene List Input
â””â”€ Statistical Filters
```

---

### ğŸ“ Dataset ë°˜ì… ì‹œ ë³„ëª…(Alias) ì…ë ¥ ê¸°ëŠ¥
**íŒŒì¼:** `src/gui/main_window.py`, `src/presenters/main_presenter.py`

**ë³€ê²½ì‚¬í•­:**
- "Add Dataset" ë²„íŠ¼ í´ë¦­ ì‹œ ë³„ëª… ì…ë ¥ ë‹¤ì´ì–¼ë¡œê·¸ í‘œì‹œ
- ê¸°ë³¸ê°’: íŒŒì¼ëª… (ì˜ˆ: `final_de_results.xlsx` â†’ `final_de_results`)
- ì‚¬ìš©ìê°€ ì›í•˜ëŠ” ì´ë¦„ìœ¼ë¡œ ë³€ê²½ ê°€ëŠ¥
- Cancel ì‹œ ë°ì´í„°ì…‹ ë¡œë“œ ì·¨ì†Œ

**ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤:**
```
1. Add Dataset ë²„íŠ¼ í´ë¦­
2. íŒŒì¼ ì„ íƒ (ì˜ˆ: H2O2_vs_Control/final_de_results.xlsx)
3. âœ¨ ë³„ëª… ì…ë ¥ ë‹¤ì´ì–¼ë¡œê·¸ í‘œì‹œ
   - ê¸°ë³¸ê°’: "final_de_results"
   - ë³€ê²½: "H2O2_Control_Comparison"
4. OK â†’ ë³„ëª…ìœ¼ë¡œ ë°ì´í„°ì…‹ ì¶”ê°€
```

**ì¶”ê°€ëœ íŒŒë¼ë¯¸í„°:**
- `MainPresenter.load_dataset(file_path, custom_name=None)`
- `custom_name`: ì‚¬ìš©ì ì§€ì • ì´ë¦„ (ìš°ì„ ìˆœìœ„ ìµœìƒìœ„)

---

### ğŸ”§ Dataset ë¹„êµ ê¸°ëŠ¥ ìˆ˜ì •
**íŒŒì¼:** `src/gui/main_window.py`

**ë³€ê²½ì‚¬í•­:**
- `Dataset.dataframe` ì†ì„± ì‚¬ìš©ìœ¼ë¡œ ìˆ˜ì • (ì´ì „: `Dataset.data` âŒ)
- `column_mapping` í™œìš©í•˜ì—¬ ì˜¬ë°”ë¥¸ ì»¬ëŸ¼ëª… ì°¾ê¸°
- ì—ëŸ¬ ì²˜ë¦¬ ê°•í™” (ì»¬ëŸ¼ ì—†ì„ ì‹œ ê²½ê³ )

**ìˆ˜ì •ëœ ë©”ì„œë“œ:**
1. `_compare_gene_list()`:
   - `column_mapping`ì—ì„œ `gene_id` ì»¬ëŸ¼ ì°¾ê¸°
   - ê° ë°ì´í„°ì…‹ì˜ ì›ë³¸ ì»¬ëŸ¼ëª… ì‚¬ìš©
   - ê²°ê³¼ ì—†ì„ ì‹œ ê²½ê³  ë©”ì‹œì§€

2. `_compare_statistics()`:
   - `column_mapping`ì—ì„œ `log2fc`, `adj_pvalue` ì»¬ëŸ¼ ì°¾ê¸°
   - ì»¬ëŸ¼ ì¡´ì¬ ì—¬ë¶€ í™•ì¸ í›„ í•„í„° ì ìš©

**ë™ì‘ í™•ì¸:**
```python
# Dataset êµ¬ì¡°
dataset.dataframe  # âœ… pandas DataFrame
dataset.column_mapping  # âœ… {'symbol': 'gene_id', 'log2FoldChange': 'log2fc', ...}

# Gene List ë¹„êµ
for dataset in datasets:
    gene_id_col = [orig for orig, std in dataset.column_mapping.items() if std == 'gene_id'][0]
    filtered = dataset.dataframe[dataset.dataframe[gene_id_col].isin(gene_list)]
```

---

## âœ… ì´ì „ ì—…ë°ì´íŠ¸ (2025-12-09 ì˜¤í›„ - Part 1)

### ğŸ”§ Column Display Level - Basic ëª¨ë“œ ìˆ˜ì •
**íŒŒì¼:** `src/gui/main_window.py`

**ë³€ê²½ì‚¬í•­:**
- **Basic ë ˆë²¨**: `gene_id` + **ìƒ˜í”Œë³„ count ê°’** (Ctrl_1, Ctrl_2, KO_1 ë“±) í‘œì‹œ
- ì´ì „: gene_id + base_meanë§Œ í‘œì‹œ
- í˜„ì¬: gene_id + ë§¤í•‘ë˜ì§€ ì•Šì€ ëª¨ë“  ì»¬ëŸ¼ (ìƒ˜í”Œ ë°ì´í„°ë¡œ ê°„ì£¼)

**ë™ì‘ ì›ë¦¬:**
```python
# Basic ë ˆë²¨ì¼ ë•Œ
- gene_id ì¶”ê°€ (ë§¤í•‘ëœ í‘œì¤€ ì»¬ëŸ¼)
- column_mappingì— ì—†ëŠ” ëª¨ë“  ì»¬ëŸ¼ ì¶”ê°€ (ìƒ˜í”Œ countë¡œ ê°„ì£¼)
- ê²°ê³¼: gene_id, Ctrl_1, Ctrl_2, KO_1, KO_2, ...
```

---

### ğŸ†š ë°ì´í„°ì…‹ ë¹„êµ ê¸°ëŠ¥ ì¶”ê°€
**ìƒˆ íŒŒì¼:** `src/gui/comparison_panel.py`
**ìˆ˜ì • íŒŒì¼:** `src/gui/main_window.py`

**ì¶”ê°€ëœ ê¸°ëŠ¥:**

#### ğŸ“‹ ë¹„êµ íŒ¨ë„ (ComparisonPanel)
ì¢Œì¸¡ í•˜ë‹¨ì— ìƒˆë¡œìš´ íŒ¨ë„ ì¶”ê°€:
- **Dataset ì„ íƒ**: ë‹¤ì¤‘ ì„ íƒ ê°€ëŠ¥ (2ê°œ ì´ìƒ)
- **ë¹„êµ íƒ€ì… ì„ íƒ**: 6ê°€ì§€ ë¹„êµ ë°©ì‹
- **ì˜µì…˜ ì„¤ì •**: í˜„ì¬ í•„í„° ì‚¬ìš©, ê³µí†µ ìœ ì „ìë§Œ í‘œì‹œ ë“±

#### ğŸ”¬ ë¹„êµ íƒ€ì…

1. **Gene List Filtering** âœ… êµ¬í˜„ë¨
   - ë™ì¼í•œ gene listë¡œ ì—¬ëŸ¬ ë°ì´í„°ì…‹ í•„í„°ë§
   - ê²°ê³¼ë¥¼ í•˜ë‚˜ì˜ í…Œì´ë¸”ì— ë‚˜ë€íˆ í‘œì‹œ
   - Dataset ì»¬ëŸ¼ìœ¼ë¡œ êµ¬ë¶„

2. **Statistics Filtering** âœ… êµ¬í˜„ë¨
   - ë™ì¼í•œ í†µê³„ ê¸°ì¤€ (log2FC, p-value)ìœ¼ë¡œ ì—¬ëŸ¬ ë°ì´í„°ì…‹ í•„í„°ë§
   - ê° ë°ì´í„°ì…‹ì˜ í•„í„°ë§ ê²°ê³¼ ë¹„êµ

3. **Venn Diagram** ğŸš§ ì˜ˆì •
   - 2-3ê°œ ë°ì´í„°ì…‹ì˜ ìœ ì „ì êµì§‘í•©/ì°¨ì§‘í•© ì‹œê°í™”
   - ê³µí†µ ìœ ì „ì, ê³ ìœ  ìœ ì „ì í™•ì¸

4. **Scatter Plot** ğŸš§ ì˜ˆì •
   - 2ê°œ ë°ì´í„°ì…‹ì˜ log2FC ê°’ X/Y ì¶• ë¹„êµ
   - ì¼ì¹˜/ë¶ˆì¼ì¹˜ ìœ ì „ì ì‹œê°í™”

5. **Heatmap** ğŸš§ ì˜ˆì •
   - ì—¬ëŸ¬ ë°ì´í„°ì…‹ì˜ ë™ì¼ ìœ ì „ì ë°œí˜„ íŒ¨í„´ ë¹„êµ

6. **Correlation Analysis** ğŸš§ ì˜ˆì •
   - ë°ì´í„°ì…‹ ê°„ log2FC/p-value ìƒê´€ê³„ìˆ˜ ê³„ì‚°

**ì‚¬ìš©ë²•:**
```
1. ì¢Œì¸¡ í•˜ë‹¨ "Select Datasets to Compare" ì˜ì—­
2. ë¹„êµí•  ë°ì´í„°ì…‹ 2ê°œ ì´ìƒ ì„ íƒ
3. "Comparison Type" ì„ íƒ
4. ì˜µì…˜ ì„¤ì • (ì„ íƒì‚¬í•­)
5. "Start Comparison" ë²„íŠ¼ í´ë¦­
```

**ì¶”ê°€ëœ ë©”ì„œë“œ:**
- `_on_comparison_requested()`: ë¹„êµ ìš”ì²­ ì²˜ë¦¬
- `_perform_basic_comparison()`: ê¸°ë³¸ ë¹„êµ ì‹¤í–‰
- `_compare_gene_list()`: Gene list ë¹„êµ
- `_compare_statistics()`: Statistics ë¹„êµ
- `_update_comparison_panel_datasets()`: ë°ì´í„°ì…‹ ë¦¬ìŠ¤íŠ¸ ìë™ ì—…ë°ì´íŠ¸

---

## âœ… ì´ì „ êµ¬í˜„ ê¸°ëŠ¥

### 1ï¸âƒ£ Load from File ë²„íŠ¼ ê¸°ëŠ¥ êµ¬í˜„

**íŒŒì¼:** `src/gui/filter_panel.py`

**ë³€ê²½ì‚¬í•­:**
- `_on_load_file()` ë©”ì„œë“œ ì¶”ê°€
- `_parse_gene_file()` ë©”ì„œë“œ ì¶”ê°€
- ì§€ì› íŒŒì¼ í˜•ì‹:
  - **TXT**: í•œ ì¤„ì— í•˜ë‚˜ì˜ ìœ ì „ì
  - **CSV**: ì²« ë²ˆì§¸ ì»¬ëŸ¼ë§Œ ì‚¬ìš©
  - **GMT**: GSEA gene set í˜•ì‹ (3ë²ˆì§¸ ì»¬ëŸ¼ë¶€í„° ìœ ì „ì)

**ì‚¬ìš©ë²•:**
```python
# Filter Panelì—ì„œ "ğŸ“ Load from File..." ë²„íŠ¼ í´ë¦­
# â†’ íŒŒì¼ ì„ íƒ ë‹¤ì´ì–¼ë¡œê·¸
# â†’ TXT/CSV/GMT íŒŒì¼ ì„ íƒ
# â†’ ìœ ì „ì ë¦¬ìŠ¤íŠ¸ ìë™ íŒŒì‹± ë° ë¡œë“œ
```

**ìƒ˜í”Œ íŒŒì¼:**
- `test/sample_gene_list.txt`: 15ê°œ oncogene ëª©ë¡
- `test/sample_gene_set.gmt`: 3ê°œ pathway gene sets

---

### 2ï¸âƒ£ ì‹œíŠ¸ ì»¬ëŸ¼ í‘œì‹œ ë ˆë²¨ ì»¨íŠ¸ë¡¤

**íŒŒì¼:** `src/gui/main_window.py`

**ë³€ê²½ì‚¬í•­:**
- **View ë©”ë‰´** â†’ **Column Display Level** ì¶”ê°€
- 3ê°€ì§€ ë ˆë²¨:
  1. **Basic**: Gene ID + Abundance (baseMean, avg_expression ë“±)
  2. **DE Analysis**: Basic + log2FC + padj (ê¸°ë³¸ê°’ âœ…)
  3. **Full**: ëª¨ë“  ì»¬ëŸ¼ í‘œì‹œ

**ì¶”ê°€ ë©”ì„œë“œ:**
- `populate_table()`: DataFrame â†’ QTableWidget (ë ˆë²¨ í•„í„°ë§ ì ìš©)
- `_filter_columns()`: ë ˆë²¨ì— ë”°ë¼ ì»¬ëŸ¼ í•„í„°ë§
- `_on_column_level_changed()`: ë ˆë²¨ ë³€ê²½ ì´ë²¤íŠ¸ ì²˜ë¦¬

**ë™ì‘:**
```
View â†’ Column Display Level â†’ DE Analysis (ê¸°ë³¸)
  â†“
í‘œì‹œ: gene_id, symbol, baseMean, log2FC, padj

View â†’ Column Display Level â†’ Full
  â†“
í‘œì‹œ: ëª¨ë“  ì»¬ëŸ¼ (lfcSE, stat, pvalue ë“± í¬í•¨)
```

---

### 3ï¸âƒ£ ìœ íš¨ìˆ«ì (Decimal Precision) ì„¤ì •

**íŒŒì¼:** `src/gui/main_window.py`

**ë³€ê²½ì‚¬í•­:**
- **View ë©”ë‰´** â†’ **Decimal Precision** ì¶”ê°€
- ì„ íƒ ê°€ëŠ¥í•œ ì†Œìˆ˜ì  ìë¦¿ìˆ˜: 2, 3 (ê¸°ë³¸), 4, 5, 6
- `self.decimal_precision` ì†ì„±ìœ¼ë¡œ ê´€ë¦¬
- `populate_table()`ì—ì„œ float ê°’ í¬ë§·íŒ… ì‹œ ì ìš©

**ë™ì‘:**
```python
# ê¸°ë³¸ê°’: 3ìë¦¬
0.001234567 â†’ 0.001

# 5ìë¦¬ ì„ íƒ ì‹œ
0.001234567 â†’ 0.00123
```

---

### 4ï¸âƒ£ Dataset ì´ë¦„ ì¤‘ë³µ ë°©ì§€ ë° êµ¬ë³„

**íŒŒì¼:** `src/gui/dataset_manager.py`

**ë³€ê²½ì‚¬í•­:**
- `_generate_unique_name()`: ì¤‘ë³µ ì‹œ ìë™ìœ¼ë¡œ ë²ˆí˜¸ ì¶”ê°€
  ```
  DESeq2_results
  DESeq2_results (2)
  DESeq2_results (3)
  ```

- `dataset_metadata`: ë©”íƒ€ë°ì´í„° ì €ì¥
  - ì›ë³¸ íŒŒì¼ ê²½ë¡œ
  - ë°ì´í„°ì…‹ íƒ€ì…
  - í–‰/ì—´ ê°œìˆ˜
  - ë¡œë“œ ì‹œê°„

- `_create_tooltip()`: ì½¤ë³´ë°•ìŠ¤ í•­ëª©ì— íˆ´íŒ í‘œì‹œ
  ```
  ë§ˆìš°ìŠ¤ ì˜¤ë²„ ì‹œ:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ DESeq2_results (2)          â”‚
  â”‚ ğŸ“ File: /path/to/file.xlsx â”‚
  â”‚ ğŸ“Š Rows: 15000              â”‚
  â”‚ ğŸ”¬ Type: differential_exp... â”‚
  â”‚ ğŸ• Added: 2025-12-09 14:30  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  ```

**Presenter ë³€ê²½:**
- `load_dataset()`: ê³ ìœ  ì´ë¦„ ìƒì„± í›„ ì €ì¥
- `_update_view_with_dataset()`: ë©”íƒ€ë°ì´í„° í¬í•¨í•˜ì—¬ ì „ë‹¬

---

### 5ï¸âƒ£ Filtering Mode ì•ˆë‚´ ë¬¸êµ¬ ì œê±°

**íŒŒì¼:** `src/gui/filter_panel.py`

**ë³€ê²½ì‚¬í•­:**
```python
# ì œê±°ë¨:
# mode_info = QLabel("<small><i>ë‘ ëª¨ë“œëŠ” ë…ë¦½ì ìœ¼ë¡œ ë™ì‘í•©ë‹ˆë‹¤.</i></small>")

# í˜„ì¬ ìƒíƒœ:
( ) ğŸ§¬ Gene List Filter
(â—) ğŸ“Š Statistical Filter (p-value & FC)
```

UIê°€ ë” ê¹”ë”í•´ì¡ŒìŠµë‹ˆë‹¤.

---

### 6ï¸âƒ£ Add Dataset ë²„íŠ¼ ê¸°ëŠ¥ ì—°ê²°

**íŒŒì¼:** `src/gui/main_window.py`

**ë³€ê²½ì‚¬í•­:**
- `_on_add_dataset()`: ì¶”ê°€ ë°ì´í„°ì…‹ ë¡œë“œ ì´ë²¤íŠ¸
- `_on_dataset_removed()`: ë°ì´í„°ì…‹ ì œê±° ì´ë²¤íŠ¸
- Dataset Managerì˜ ë²„íŠ¼ë“¤ì„ presenterì™€ ì—°ê²°

**ë™ì‘ íë¦„:**
```
[â• Add Dataset] í´ë¦­
  â†“
íŒŒì¼ ì„ íƒ ë‹¤ì´ì–¼ë¡œê·¸
  â†“
load_dataset() í˜¸ì¶œ
  â†“
ê³ ìœ  ì´ë¦„ ìƒì„± (ì˜ˆ: DESeq2_results (2))
  â†“
Dataset Managerì— ì¶”ê°€ (íˆ´íŒ í¬í•¨)
  â†“
ì½¤ë³´ë°•ìŠ¤ì—ì„œ ì„ íƒ ê°€ëŠ¥
```

---

## ğŸ¯ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: ì—¬ëŸ¬ íŒŒì´í”„ë¼ì¸ ê²°ê³¼ ë¹„êµ

```
1. [Open Dataset] â†’ "DESeq2_results.xlsx" ë¡œë“œ
   â†’ Dataset: "DESeq2_results"

2. [â• Add Dataset] â†’ "DESeq2_results.xlsx" (ë‹¤ë¥¸ ì¡°ê±´) ë¡œë“œ
   â†’ Dataset: "DESeq2_results (2)"
   â†’ íˆ´íŒ: íŒŒì¼ ê²½ë¡œ, ë¡œë“œ ì‹œê°„ìœ¼ë¡œ êµ¬ë³„

3. [â• Add Dataset] â†’ "edgeR_results.xlsx" ë¡œë“œ
   â†’ Dataset: "edgeR_results"

4. ì½¤ë³´ë°•ìŠ¤ì—ì„œ ì „í™˜í•˜ë©° ë¹„êµ
```

### ì‹œë‚˜ë¦¬ì˜¤ 2: ì»¬ëŸ¼ ë ˆë²¨ ì¡°ì •

```
1. Dataset ë¡œë“œ â†’ ê¸°ë³¸ì ìœ¼ë¡œ DE Analysis ë ˆë²¨
   í‘œì‹œ: gene_id, symbol, baseMean, log2FC, padj

2. [View] â†’ [Column Display Level] â†’ [Full]
   í‘œì‹œ: ëª¨ë“  ì»¬ëŸ¼ (lfcSE, stat, pvalue í¬í•¨)

3. [View] â†’ [Decimal Precision] â†’ [5 decimal places]
   0.001234 â†’ 0.00123
```

### ì‹œë‚˜ë¦¬ì˜¤ 3: GMT íŒŒì¼ë¡œ gene set ë¡œë“œ

```
1. Filter Panel â†’ (â—) ğŸ§¬ Gene List Filter ì„ íƒ

2. [ğŸ“ Load from File...]
   â†’ test/sample_gene_set.gmt ì„ íƒ

3. ìë™ íŒŒì‹±:
   - ONCOGENE_PATHWAY: 10ê°œ ìœ ì „ì
   - CELL_CYCLE: 6ê°œ ìœ ì „ì
   - DNA_REPAIR: 6ê°œ ìœ ì „ì
   ì´ 22ê°œ ìœ ì „ì (ì¤‘ë³µ ì œê±° í›„)

4. [ğŸ” Apply Gene List Filter]
   â†’ ìƒˆ ì‹œíŠ¸ì— í•´ë‹¹ ìœ ì „ìë§Œ í‘œì‹œ
```

---

## ğŸ”§ ê¸°ìˆ ì  ì„¸ë¶€ì‚¬í•­

### ì»¬ëŸ¼ í•„í„°ë§ ë¡œì§

```python
def _filter_columns(self, all_columns: List[str]) -> List[str]:
    # Basic: gene, symbol, id, basemean, mean
    basic_patterns = ['gene', 'symbol', 'id', 'basemean', 'base_mean', 'avg', 'mean']
    
    # DE: log2fc, fc, fold, padj, adj, fdr
    de_patterns = ['log2fc', 'logfc', 'fc', 'fold', 'padj', 'adj', 'fdr']
    
    if level == "basic":
        return [basic_cols]
    elif level == "de":
        return [basic_cols + de_cols]
    else:  # full
        return all_columns
```

### GMT íŒŒì‹± ë¡œì§

```python
# GMT í˜•ì‹:
# gene_set_name\tdescription\tgene1\tgene2\tgene3\t...

for line in f:
    parts = line.strip().split('\t')
    if len(parts) > 2:
        genes.extend(parts[2:])  # 3ë²ˆì§¸ ì»¬ëŸ¼ë¶€í„° ìœ ì „ì
```

### ê³ ìœ  ì´ë¦„ ìƒì„± ë¡œì§

```python
def _generate_unique_name(self, base_name: str) -> str:
    existing = self.get_all_datasets()
    
    if base_name not in existing:
        return base_name
    
    counter = 2
    while f"{base_name} ({counter})" in existing:
        counter += 1
    
    return f"{base_name} ({counter})"
```

---

## ğŸ“Š ë³€ê²½ëœ íŒŒì¼ ëª©ë¡

```
src/gui/filter_panel.py          â† Load from File, ë¬¸êµ¬ ì œê±°
src/gui/main_window.py            â† ì»¬ëŸ¼ ë ˆë²¨, ì •ë°€ë„, Add Dataset
src/gui/dataset_manager.py        â† ì¤‘ë³µ ë°©ì§€, ë©”íƒ€ë°ì´í„°, íˆ´íŒ
src/presenters/main_presenter.py  â† ê³ ìœ  ì´ë¦„ ìƒì„±, populate_table í†µí•©
test/sample_gene_list.txt         â† ìƒ˜í”Œ TXT íŒŒì¼
test/sample_gene_set.gmt          â† ìƒ˜í”Œ GMT íŒŒì¼
```

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ë°©ë²•

### 1. Load from File í…ŒìŠ¤íŠ¸

```powershell
# í”„ë¡œê·¸ë¨ ì‹¤í–‰
.\venv\Scripts\python.exe src\main.py

# Filter Panelì—ì„œ:
1. (â—) ğŸ§¬ Gene List Filter ì„ íƒ
2. [ğŸ“ Load from File...] í´ë¦­
3. test\sample_gene_list.txt ì„ íƒ
4. 15ê°œ ìœ ì „ì ë¡œë“œ í™•ì¸
5. [ğŸ” Apply Gene List Filter] í´ë¦­
```

### 2. ì»¬ëŸ¼ ë ˆë²¨ í…ŒìŠ¤íŠ¸

```
1. Excel íŒŒì¼ ë¡œë“œ
2. [View] â†’ [Column Display Level] â†’ [Basic]
   â†’ gene, baseMeanë§Œ í‘œì‹œ í™•ì¸
3. [DE Analysis] ì„ íƒ
   â†’ log2FC, padj ì¶”ê°€ í™•ì¸
4. [Full] ì„ íƒ
   â†’ ëª¨ë“  ì»¬ëŸ¼ í™•ì¸
```

### 3. Dataset ì¤‘ë³µ í…ŒìŠ¤íŠ¸

```
1. [Open Dataset] â†’ DESeq2_results.xlsx
   â†’ "DESeq2_results" í™•ì¸
2. [â• Add Dataset] â†’ DESeq2_results.xlsx
   â†’ "DESeq2_results (2)" í™•ì¸
3. ì½¤ë³´ë°•ìŠ¤ í•­ëª©ì— ë§ˆìš°ìŠ¤ ì˜¤ë²„
   â†’ íˆ´íŒ í™•ì¸ (íŒŒì¼ ê²½ë¡œ, ì‹œê°„ ë“±)
```

---

## ğŸ’¡ ì¶”ê°€ ê°œì„  ì œì•ˆ

### í–¥í›„ êµ¬í˜„ ê³ ë ¤ì‚¬í•­

1. **ì»¬ëŸ¼ ë ˆë²¨ ì»¤ìŠ¤í„°ë§ˆì´ì§•**
   - ì‚¬ìš©ìê°€ ì§ì ‘ í‘œì‹œí•  ì»¬ëŸ¼ ì„ íƒ
   - í”„ë¦¬ì…‹ ì €ì¥ ê¸°ëŠ¥

2. **Dataset ë¹„êµ UI ê°œì„ **
   - ì²´í¬ë°•ìŠ¤ë¡œ ë‹¤ì¤‘ ì„ íƒ
   - Venn diagram ë¯¸ë¦¬ë³´ê¸°

3. **GMT íŒŒì¼ gene set ì„ íƒ**
   - GMT ë¡œë“œ ì‹œ pathway ì„ íƒ ë‹¤ì´ì–¼ë¡œê·¸
   - ì—¬ëŸ¬ pathway ì¤‘ í•˜ë‚˜ ì„ íƒí•˜ì—¬ ë¡œë“œ

4. **í…Œì´ë¸” ë‚´ë³´ë‚´ê¸° ê°œì„ **
   - í˜„ì¬ í‘œì‹œ ë ˆë²¨ ê·¸ëŒ€ë¡œ ë‚´ë³´ë‚´ê¸°
   - ì„ íƒëœ í–‰ë§Œ ë‚´ë³´ë‚´ê¸°

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] Load from File (TXT, CSV, GMT)
- [x] ì»¬ëŸ¼ í‘œì‹œ ë ˆë²¨ (Basic, DE, Full)
- [x] ìœ íš¨ìˆ«ì ì„¤ì • (2-6ìë¦¬)
- [x] Dataset ì¤‘ë³µ ë°©ì§€ (ìë™ ë²ˆí˜¸ ì¶”ê°€)
- [x] Dataset ë©”íƒ€ë°ì´í„° ë° íˆ´íŒ
- [x] Filtering Mode ë¬¸êµ¬ ì œê±°
- [x] Add Dataset ë²„íŠ¼ ì—°ê²°
- [x] ìƒ˜í”Œ íŒŒì¼ ìƒì„±

---

**ëª¨ë“  ê¸°ëŠ¥ì´ ì„±ê³µì ìœ¼ë¡œ êµ¬í˜„ë˜ì—ˆìŠµë‹ˆë‹¤!** ğŸ‰

ì´ì œ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ì—¬ í…ŒìŠ¤íŠ¸í•´ë³´ì„¸ìš”:

```powershell
.\venv\Scripts\python.exe src\main.py
```
